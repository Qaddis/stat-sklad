# Эндпоинты (и не только) для реализации

### Авторизация

1. **Регистрация**: `/auth/sign_up` - POST-запрос

   - Получаемые данные:
     ```json
     {
     	"first_name": строка,
     	"second_name": строка,
     	"email": строка,
     	"password": строка
     }
     ```
   - Возвращаемые данные:
     ```json
     {
     	"user_id": строка (uuid),
     	"refresh_token": строка,
     	"access_token": строка
     }
     ```

2. **Вход в аккаунт**: `/auth/sign_in` - POST-запрос

   - Получаемые данные:

     ```json
     {
     	"email": строка,
     	"password": строка
     }
     ```

   - Возвращаемые данные:
     ```json
     {
     	"user_id": строка (uuid),
     	"refresh_token": строка,
     	"access_token": строка
     }
     ```

3. **Обновление пары токенов**: `/auth/refresh` - POST-запрос

   - Получаемые данные:

     ```json
     {
     	"refresh_token": строка
     }
     ```

   - Возвращаемые данные:
     ```json
     {
     	"user_id": строка,
     	"refresh_token": строка,
     	"access_token": строка
     }
     ```

#### Дополнительно:

- **Depends** для проверки по _access_token_-у, авторизован ли пользователь

### Пользователь

1. **Получение данных о пользователе**: `/user` - GET-запрос

   - Получаемые данные: _id_ пользователя из _access_token_-а

   - Возвращаемые данные:
     ```json
     {
     	"user_id": строка (uuid),
     	"first_name": строка,
     	"second_name": строка,
     	"email": строка
     }
     ```

2. **Изменение данных о пользователе**: `/user` - PATCH-запрос

   - Получаемые данные:

     ```json
     {
     	"first_name": строка,
     	"second_name": строка,
     	"password": строка
     }
     ```

   - Возвращаемые данные: <u>только статус код</u>

### Продукты

1. **Получение списка продуктов**: `/products` - GET-запрос

   - Получаемые данные:

     ```
     # Query-параметры
     size = целое число  # Размер страницы
     page = целое число  # Номер страницы
     q = строка  # Запрос для поиска по названию
     ```

   - Возвращаемые данные (<u>с пагинацией</u>):
     ```json
     [
      {
      	"id": строка (uuid),
      	"name": строка,
      	"quantity": целое число,
      	"units": строка (UnitsEnum),
      	"last_supply": дата (ISO-строка)
      }
     ]
     ```

### Операции с продуктами

1. **Создание поставки**: `/actions/supply` - POST-запрос

   - Получаемые данные:

     ```json
     [
       {
        	"ingredient_id": строка (uuid),
        	"quantity": целое число
       }
     ]
     ```

   - Возвращаемые данные: <u>только статус код</u>

2. **Создание списания**: `/actions/write_off` - POST-запрос

   - Получаемые данные:

     ```json
     [
       {
        	"ingredient_id": строка (uuid),
        	"quantity": целое число
       }
     ]
     ```

   - Возвращаемые данные: <u>только статус код</u>

3. **Взяли на готовку**: `/actions/taken` - POST-запрос

   - Получаемые данные:

     ```json
     [
       {
        	"ingredient_id": строка (uuid),
        	"quantity": целое число
       }
     ]
     ```

   - Возвращаемые данные: <u>только статус код</u>

### История операций

1. **Получение истории операций**: `/actions/history` - GET-запрос

   - Получаемые данные:

     ```
     # Query-параметры
     size = целое число  # Размер страницы
     page = целое число  # Номер страницы
     date_from = дата (ISO-строка)  # Данные с (фильтр)
     date_to = дата (ISO-строка)  #  Данные по (фильтр)
     ```

   - Возвращаемые данные (<u>с пагинацией</u>, <u>сортировка</u> - от новых к старым (по _created_at_)):
     ```json
     {
     	"id": строка (uuid),
     	"type": строка (ActionTypeEnum),
     	"products": массив строк (названия продуктов, макс. длинна - 10),
     	"created_at": дата (ISO-строка)
     }
     ```

2. **Подробнее об операции**: `/actions/history/[id]` - GET-запрос

   - Получаемые данные:

     ```
     # Query-параметры
     q = строка (поиск по названию)
     ```

   - Возвращаемые данные:

     ```json
      {
       	"id": строка (uuid),
       	"type": строка (ActionTypeEnum),
       	"products": массив объектов <action_items>,
       	"created_at": дата (ISO-строка)
      }
     ```

3. **Последние операции**: `/actions/history/last` - GET-запрос

   - Получаемых данных <u>нет</u>

   - Возвращаемые данные (макс. длинна - 5):
     ```json
     [
       {
       	"id": строка (uuid),
       	"type": строка (ActionTypeEnum),
       	"products": массив строк (названия продуктов, макс. длинна - 10),
       	"created_at": дата (ISO-строка)
       }
     ]
     ```

### Ингредиенты

1. **Подсказки по ингредиентам**: `/ingredients/hints` - GET-запрос

   - Получаемые данные:

     ```
     # Query-параметры
     q = строка (поиск по названию)
     ```

   - Возвращаемые данные:

     ```json
     [
       {
       	"id": строка (uuid),
       	"name": строка
       }
     ]
     ```

2. **Создание ингредиента**: `/ingredients` - POST-запрос

   - Получаемые данные:

     ```json
     {
     	"name": строка,
     	"units": строка (UnitsEnum)
     }
     ```

   - Возвращаемые данные: <u>только статус код</u>

### Уведомления

1. **Получение уведомлений**: `/notifications` - GET-запрос

   - Получаемых данных <u>нет</u>

   - Возвращаемые данные:
     ```json
     [
       {
       	"id": строка (uuid),
       	"title": строка,
       	"description": строка,
       	"created_at": дата (ISO-строка)
       }
     ]
     ```

2. **Удаление уведомления**: `/notifications/[notification_id]` - DELETE-запрос

   - Получаемые данные:

     ```
     # Path-параметр
     ingredient_id = строка (uuid)
     ```

   - Возвращаемые данные: <u>только статус код</u>

#### Дополнительно:

- **Механизм**, который при <u>каждом действии с продуктами</u> будет проверять их кол-во на складе и если какого-то продукта будет меньше _3 кг._ или _10 шт._ создавать уведомление

- **Механизм**, который при <u>каждом действии с продуктами</u> будет проверять их кол-во на складе и, если какого то продукта будет больше _3 кг._ или _10 шт._, если есть уведомление о малом количестве, то удалять его

### Статистика

Ждём правок по графикам :/
